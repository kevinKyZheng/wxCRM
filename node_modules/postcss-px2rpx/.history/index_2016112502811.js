var postcss = require('postcss');

module.exports = postcss.plugin('postcss-px2rpx', function (opts) {
    opts = opts || {};

    // Work with options here

    return function (root, result) {

        // Transform CSS AST here
        root.walkDecls(decl => {
            var val = decl.value;
            if (val.indexOf("px") > -1) {
                decl.value = val.replace(/(\d)px/g, function (match, num) {
                    return num * 2 + "rpx";
                });
            }
        });
    };
});
